# API Gateway Configuration

# Server
GATEWAY_ADDR=:8080
GATEWAY_DEBUG=false

# Authentication (JWT)
AUTH_ENABLED=false
JWT_SECRET=your-secret-key-must-be-at-least-32-characters-long
AUTH_PUBLIC_PATHS=/health,/status,/metrics
AUTH_TOKEN_HEADER=Authorization
AUTH_TOKEN_QUERY_PARAM=token
AUTH_ACCESS_TOKEN_TTL=15
AUTH_REFRESH_TOKEN_TTL=7

# Security Headers
SECURITY_HEADERS_ENABLED=true
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
SECURITY_HSTS_PRELOAD=false
SECURITY_CSP=default-src 'self'
SECURITY_X_FRAME_OPTIONS=DENY
SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin

# TLS
TLS_ENABLED=false
TLS_CERT_FILE=
TLS_KEY_FILE=

# Admin API
ADMIN_ENABLED=false
ADMIN_PATH=/admin
ADMIN_API_KEY=your-admin-api-key-min-16-chars

# Metrics (Prometheus)
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_NAMESPACE=api_gateway

# Rate Limiting (Gateway-level)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPS=1000
RATE_LIMIT_BURST=2000

# Timeouts (in seconds or duration strings like "10s", "1m")
TIMEOUT_GATEWAY=30s
TIMEOUT_SERVICE=10s

# CORS
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# User Service
USER_SERVICE_ENABLED=true
USER_SERVICE_TARGETS=http://localhost:8081,http://localhost:8082
USER_SERVICE_PATH_PREFIX=/api/v1/users
USER_SERVICE_LB=round-robin
USER_SERVICE_HEALTH_CHECK=false
USER_SERVICE_TIMEOUT=10s
USER_SERVICE_RETRY=3

# Order Service
ORDER_SERVICE_ENABLED=true
ORDER_SERVICE_TARGETS=http://localhost:9001,http://localhost:9002
ORDER_SERVICE_PATH_PREFIX=/api/v1/orders
ORDER_SERVICE_LB=weighted-round-robin
ORDER_SERVICE_HEALTH_CHECK=true
ORDER_SERVICE_TIMEOUT=15s
ORDER_SERVICE_RETRY=2

# Product Service
PRODUCT_SERVICE_ENABLED=true
PRODUCT_SERVICE_TARGETS=http://localhost:7001
PRODUCT_SERVICE_PATH_PREFIX=/api/v1/products
PRODUCT_SERVICE_LB=round-robin
PRODUCT_SERVICE_HEALTH_CHECK=false
PRODUCT_SERVICE_TIMEOUT=10s
PRODUCT_SERVICE_RETRY=3

# Phase 3: Advanced Features

# Distributed Tracing
TRACING_ENABLED=false
TRACING_ENDPOINT=http://localhost:14268/api/traces
TRACING_SERVICE_NAME=api-gateway
TRACING_SAMPLE_RATE=1.0
TRACING_EXPORT_FORMAT=jaeger

# Response Caching
CACHE_ENABLED=false
CACHE_TTL=5m
CACHE_MAX_SIZE=100
CACHE_EXCLUDE_PATHS=/admin/*,/metrics
CACHE_ONLY_METHODS=GET
CACHE_VARY_HEADERS=Accept,Accept-Encoding

# Canary Deployments / Traffic Splitting
CANARY_ENABLED=false
CANARY_DEFAULT_WEIGHT=100

# Advanced Routing
ADVANCED_ROUTING_ENABLED=false
