<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plumego Reference - 现代 Go Web 框架演示</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <i class="fas fa-feather"></i>
      </div>
      <h1 class="title">Plumego Reference</h1>
      <p class="subtitle">现代 Go Web 框架演示平台 - 展示优雅的架构设计</p>
    </header>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item">
        <div class="status-indicator status-online"></div>
        <span>服务器运行正常</span>
      </div>
      <div class="status-item">
        <i class="fas fa-plug"></i>
        <span>端口: 8080</span>
      </div>
      <div class="status-item">
        <i class="fas fa-book"></i>
        <a href="/docs" style="color: var(--primary); text-decoration: none;">文档: /docs</a>
      </div>
      <div class="status-item">
        <i class="fas fa-code"></i>
        <a href="/api/hello" style="color: var(--primary); text-decoration: none;">API: /api/hello</a>
      </div>
    </div>

    <!-- Feature Cards -->
    <div class="feature-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <i class="fas fa-book"></i>
        </div>
        <h3 class="feature-title">📚 交互式文档</h3>
        <p class="feature-description">
          探索 Plumego 框架的完整 API 文档，支持中英文切换，内容详尽且易于理解。
        </p>
        <a href="/docs" class="btn">
          <i class="fas fa-arrow-right"></i> 浏览文档
        </a>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <i class="fas fa-plug"></i>
        </div>
        <h3 class="feature-title">🔌 Webhook 管理</h3>
        <p class="feature-description">
          测试和验证 webhook 集成，支持 GitHub 和 Stripe，自动重试和状态监控。
        </p>
        <a href="/webhooks" class="btn btn-secondary">
          <i class="fas fa-arrow-right"></i> Webhook 控制台
        </a>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <h3 class="feature-title">📊 性能监控</h3>
        <p class="feature-description">
          实时查看应用性能指标、Prometheus 指标和健康状态。
        </p>
        <a href="/metrics" class="btn">
          <i class="fas fa-arrow-right"></i> 查看指标
        </a>
      </div>
    </div>

    <!-- WebSocket Panel -->
    <div class="websocket-panel">
      <div class="panel-header">
        <h3 class="panel-title">
          <i class="fas fa-broadcast-tower"></i>
          WebSocket 实时通信
        </h3>
        <div class="connection-status connection-disconnected" id="connectionStatus">
          <i class="fas fa-circle"></i>
          <span>未连接</span>
        </div>
      </div>

      <div class="input-group">
        <input type="text" id="messageInput" placeholder="输入消息，按 Enter 发送..." />
        <button class="btn btn-success" onclick="sendMessage()" title="发送消息">
          <i class="fas fa-paper-plane"></i> 发送
        </button>
        <button class="btn" onclick="connectWebSocket()" id="connectBtn" title="连接 WebSocket">
          <i class="fas fa-plug"></i> 连接
        </button>
        <button class="btn btn-danger" onclick="disconnectWebSocket()" id="disconnectBtn" style="display: none;" title="断开连接">
          <i class="fas fa-unlink"></i> 断开
        </button>
        <button class="btn btn-warning" onclick="clearLog()" title="清空日志">
          <i class="fas fa-trash"></i> 清空
        </button>
      </div>

      <div class="message-log" id="messageLog">
        <div class="log-entry">
          <div class="log-timestamp">系统</div>
          <div class="log-content log-info">WebSocket 测试工具已就绪，点击"连接"开始测试...</div>
        </div>
      </div>
      
      <div class="stats-grid">
         <div class="stat-card">
           <div class="stat-value" id="sentCount">0</div>
           <div class="stat-label">发送消息</div>
         </div>
         <div class="stat-card">
           <div class="stat-value" id="receivedCount">0</div>
           <div class="stat-label">接收消息</div>
         </div>
         <div class="stat-card">
           <div class="stat-value" id="errorCount">0</div>
           <div class="stat-label">错误次数</div>
         </div>
         <div class="stat-card">
           <div class="stat-value" id="uptime">00:00</div>
           <div class="stat-label">连接时间</div>
         </div>
       </div>
    </div>

    <!-- Advanced Tools -->
    <div class="card">
      <h3 class="panel-title">
        <i class="fas fa-tools"></i>
        高级测试工具
      </h3>
      
      <div class="test-tools-grid">
        <!-- API Test Tool -->
        <div class="tool-card">
          <h4 class="tool-title">
            <i class="fas fa-flask"></i>
            API 测试工具
          </h4>
          <p class="tool-description">
            测试各种 API 端点，支持不同响应格式和参数配置。
          </p>
          
          <form onsubmit="testAPI(event)">
            <div class="form-group">
              <label class="form-label">API 路径</label>
              <select class="form-select" id="apiPath">
                <option value="/api/hello">GET /api/hello</option>
                <option value="/api/test">GET /api/test</option>
                <option value="/api/status">GET /api/status</option>
                <option value="/test/pubsub">GET /test/pubsub</option>
                <option value="/health/detailed">GET /health/detailed</option>
                <option value="/metrics">GET /metrics</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">响应格式</label>
              <select class="form-select" id="apiFormat">
                <option value="json">JSON</option>
                <option value="xml">XML</option>
                <option value="csv">CSV</option>
                <option value="plain">Plain Text</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">查询参数</label>
              <input type="text" class="form-input" id="apiParams" placeholder="例如: format=json&delay=1s" />
            </div>
            
            <button type="submit" class="btn">
              <i class="fas fa-play"></i> 执行测试
            </button>
          </form>
          
          <div class="response-display" id="apiResponse"></div>
        </div>

        <!-- Performance Monitor -->
        <div class="tool-card">
          <h4 class="tool-title">
            <i class="fas fa-chart-line"></i>
            性能监控
          </h4>
          <p class="tool-description">
            实时监控系统性能和指标，查看应用状态。
          </p>
          
          <div class="btn-group">
            <button class="btn" onclick="checkHealth()">
              <i class="fas fa-heartbeat"></i> 健康检查
            </button>
            <button class="btn" onclick="loadMetrics()">
              <i class="fas fa-chart-bar"></i> 加载指标
            </button>
          </div>
          
          <div class="response-display" id="healthMetrics"></div>
        </div>

        <!-- Webhook Test -->
        <div class="tool-card">
          <h4 class="tool-title">
            <i class="fas fa-envelope"></i>
            Webhook 测试
          </h4>
          <p class="tool-description">
            测试 Webhook 功能，模拟不同类型的 Webhook 事件。
          </p>
          
          <form onsubmit="testWebhook(event)">
            <div class="form-group">
              <label class="form-label">事件类型</label>
              <select class="form-select" id="webhookType">
                <option value="github">GitHub Webhook</option>
                <option value="stripe">Stripe Webhook</option>
                <option value="custom">自定义 Webhook</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">事件数据 (JSON)</label>
              <textarea class="form-textarea" id="webhookData" placeholder='{"event": "test", "data": {}}'></textarea>
            </div>
            
            <button type="submit" class="btn">
              <i class="fas fa-paper-plane"></i> 发送 Webhook
            </button>
          </form>
          
          <div class="response-display" id="webhookResponse"></div>
        </div>

        <!-- Pub/Sub Test -->
        <div class="tool-card">
          <h4 class="tool-title">
            <i class="fas fa-satellite-dish"></i>
            Pub/Sub 消息
          </h4>
          <p class="tool-description">
            测试发布订阅系统，发送和接收消息。
          </p>
          
          <form onsubmit="testPubSub(event)">
            <div class="form-group">
              <label class="form-label">主题名称</label>
              <input type="text" class="form-input" id="pubSubTopic" placeholder="例如: test.topic" value="test.default" />
            </div>
            
            <div class="form-group">
              <label class="form-label">消息内容</label>
              <textarea class="form-textarea" id="pubSubMessage" placeholder="输入要发布的消息内容..."></textarea>
            </div>
            
            <button type="submit" class="btn">
              <i class="fas fa-broadcast-tower"></i> 发布消息
            </button>
          </form>
          
          <div class="response-display" id="pubSubResponse"></div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>Powered by <strong style="color: white;">Plumego</strong> - 现代 Go Web 框架</p>
      <p style="margin-top: 0.5rem;">
        <a href="/docs">文档</a> · 
        <a href="/health/ready">健康检查</a> · 
        <a href="/health/build">构建信息</a> · 
        <a href="/api/status">系统状态</a>
      </p>
    </div>
  </div>

  <script src="/static/js/app.js"></script>
</body>
</html>
